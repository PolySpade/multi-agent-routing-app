# MAS-FRO Backend Cleanup Analysis

**Date**: November 11, 2025
**Status**: Analysis Complete - Awaiting Cleanup Approval

---

## Summary

Found **unnecessary files and duplicate folders** that can be safely removed:

- üìÅ **1 duplicate test folder** (legacy `test/` vs new `tests/`)
- üóëÔ∏è **14 `__pycache__` directories** (auto-generated Python cache)
- üóëÔ∏è **63 `.pyc` files** (compiled Python bytecode)
- üìä **htmlcov/** folder (1.1 MB - test coverage reports, regenerable)
- üß™ **.pytest_cache/** folder (19 KB - pytest cache, regenerable)
- üì¶ **cache/** folder (2.3 MB - API response cache, 2 JSON files)

**Total Space to Recover**: ~3.5 MB
**Risk Level**: ‚úÖ Low (all files are auto-generated or legacy)

---

## Detailed Analysis

### 1. Duplicate Test Folders ‚ö†Ô∏è

**Legacy Folder**: `test/`
- `test_acl_protocol.py` (7.5 KB)
- `test_algorithms.py` (6.7 KB)
- `test_api.py` (5.7 KB)
- `test_graph_updates.py` (3.0 KB)
- `test_risk_calculator.py` (7.8 KB)
- `test_scout_agent.py` (2.8 KB)

**Current Folder**: `tests/` (structured)
- `tests/unit/test_hazard_agent.py` (27 KB)
- `tests/unit/test_routing_agent.py` (23 KB)
- `tests/fixtures/`
- `tests/integration/`

**Recommendation**:
- ‚úÖ **SAFE TO DELETE** `test/` folder
- Reason: Old unstructured tests replaced by new organized test suite
- The new `tests/` follows pytest best practices with proper structure

---

### 2. Python Cache Files üóëÔ∏è

**`__pycache__` Directories**: 14 folders
Located in:
- `./app/__pycache__/`
- `./app/agents/__pycache__/`
- `./app/algorithms/__pycache__/`
- `./app/communication/__pycache__/`
- `./app/core/__pycache__/`
- `./app/database/__pycache__/`
- `./app/environment/__pycache__/`
- `./app/ml_models/__pycache__/`
- `./app/services/__pycache__/`
- `./tests/__pycache__/`
- `./tests/unit/__pycache__/`
- `./alembic/__pycache__/`
- `./alembic/versions/__pycache__/`
- `./__pycache__/`

**`.pyc` Files**: 63 compiled bytecode files

**Recommendation**:
- ‚úÖ **SAFE TO DELETE** all `__pycache__/` folders and `.pyc` files
- Reason: Auto-generated by Python interpreter, will be recreated on next run
- Common practice to exclude from git (should be in `.gitignore`)

---

### 3. Test Coverage Reports üìä

**Folder**: `htmlcov/` (1.1 MB)
- HTML test coverage reports
- Generated by `pytest --cov`

**Recommendation**:
- ‚úÖ **SAFE TO DELETE** `htmlcov/`
- Reason: Can be regenerated with `pytest --cov-report=html`
- Should be in `.gitignore`

---

### 4. Pytest Cache üß™

**Folder**: `.pytest_cache/` (19 KB)
- Pytest internal cache for faster test runs
- Stores test execution metadata

**Recommendation**:
- ‚úÖ **SAFE TO DELETE** `.pytest_cache/`
- Reason: Auto-generated, will be recreated on next `pytest` run
- Should be in `.gitignore`

---

### 5. API Response Cache üì¶

**Folder**: `cache/` (2.3 MB)
- `626f9fb9e5d7383704fe603dc6b09d950f5bdc16.json` (16 KB)
- `9f232230fa6e0a57d0acc2b94f6fe886b3ffed89.json` (2.3 MB)

**Analysis**: Likely caching API responses (possibly from PAGASA or OpenWeatherMap)

**Recommendation**:
- ‚ö†Ô∏è **CONDITIONAL DELETE** - Review first
- If these are development caches: Safe to delete
- If production data: May want to keep
- **Suggested Action**: Delete and let system regenerate on next API call

---

## Cleanup Commands

### Safe Cleanup (Recommended)

```bash
cd masfro-backend

# Remove Python cache files
find . -type d -name "__pycache__" -not -path "./.venv/*" -exec rm -rf {} + 2>/dev/null
find . -name "*.pyc" -not -path "./.venv/*" -delete

# Remove pytest cache
rm -rf .pytest_cache/

# Remove coverage reports
rm -rf htmlcov/

# Remove legacy test folder (VERIFY FIRST)
rm -rf test/

# Remove API cache (optional)
rm -rf cache/
```

### Verify Before Deleting

```bash
# Check test folder contents
ls -la test/

# Check cache contents
ls -la cache/
```

---

## Files to Keep (DO NOT DELETE)

‚úÖ **Critical Folders**:
- `app/` - Main application code
- `tests/` - Current test suite (NEW structure)
- `logs/` - Application logs
- `alembic/` - Database migrations
- `app/data/` - Data files (GeoTIFF, CSV, etc.)
- `.venv/` - Virtual environment

‚úÖ **Critical Files**:
- `README.md`, `CLAUDE.md`, `TODO.md`
- `pyproject.toml`, `uv.lock`
- `.env`, `.env.example`
- `alembic.ini`
- All `.py` source files

---

## Post-Cleanup Actions

After cleanup, update `.gitignore`:

```gitignore
# Python cache
__pycache__/
*.py[cod]
*$py.class
*.pyc

# Testing
.pytest_cache/
htmlcov/
.coverage

# Application cache
cache/

# Legacy (if not migrated)
test/
```

---

## Estimated Impact

**Before Cleanup**:
- Unnecessary files: ~3.5 MB
- Duplicate folders: 2 (test/ and cache/)
- Cache directories: 14 __pycache__ folders

**After Cleanup**:
- Cleaner repository structure
- Faster git operations
- Only essential files remain
- All functionality preserved

---

## Next Steps

1. ‚úÖ Review this analysis
2. ‚ö†Ô∏è Verify `test/` folder can be deleted (compare with `tests/`)
3. ‚ö†Ô∏è Decide on `cache/` folder (development vs production)
4. ‚úÖ Run cleanup commands
5. ‚úÖ Update `.gitignore`
6. ‚úÖ Test application still works
7. ‚úÖ Commit cleaned structure

---

**Recommendation**: Proceed with cleanup - all identified files are safe to remove and will be auto-regenerated as needed.
