# PostgreSQL configuration tuned for <1 GB RAM environments
# Copy to /etc/postgresql/*/main/conf.d/lowram.conf
# or include from postgresql.conf
#
# Expected memory footprint: ~50 MB (vs ~200 MB default)

# === Memory ===
shared_buffers = 32MB
work_mem = 1MB
maintenance_work_mem = 16MB
effective_cache_size = 64MB

# === Connections ===
max_connections = 10
superuser_reserved_connections = 1

# === WAL ===
wal_buffers = 1MB
min_wal_size = 32MB
max_wal_size = 128MB

# === Background Workers ===
autovacuum_max_workers = 1
autovacuum_naptime = 5min

# === Logging ===
log_min_messages = warning
